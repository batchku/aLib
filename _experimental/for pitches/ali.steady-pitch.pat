max v2;#N vpatcher 28 42 1233 812;#P origin 0 -6;#P window setfont "Sans Serif" 9.;#N vpatcher 50 119 450 419;#P window setfont "Sans Serif" 9.;#P newex 151 118 40 196617 change;#P newex 151 72 48 196617 route int;#P outlet 151 181 15 0;#P inlet 151 32 15 0;#P connect 0 0 2 0;#P connect 2 0 3 0;#P connect 3 0 1 0;#P fasten 2 1 1 0 225 131;#P pop;#P newobj 397 689 82 196617 p double-trouble;#P newex 389 584 40 196617 t b b 0;#P flonum 1054 716 74 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 979 716 74 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 905 716 74 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 716 700 27 196617 * 0.;#P newex 716 672 54 196617 snapshot~;#P newex 805 535 29 196617 t b s;#P newex 805 588 105 196617 info~ bogus;#P newex 992 50 27 196617 b;#P newex 992 29 42 196617 delay 0;#P newex 726 39 63 196617 patcherargs;#N vpatcher 10 59 501 497;#P window setfont "Sans Serif" 9.;#P newex 55 285 55 196617 pack 0 s 1;#P newex 59 206 65 196617 unpack 0 s 1;#P newex 311 116 27 196617 + 1;#P inlet 311 82 15 0;#P newex 109 166 35 196617 gate 2;#P inlet 259 81 15 0;#P outlet 130 320 15 0;#P inlet 134 81 15 0;#P connect 6 0 7 0;#P connect 3 0 6 0;#P connect 2 0 7 1;#P connect 6 2 7 2;#P connect 5 0 3 0;#P connect 3 1 1 0;#P connect 7 0 1 0;#P connect 0 0 3 1;#P connect 4 0 5 0;#P pop;#P newobj 492 644 108 196617 p choose-buffer-name;#P newex 342 536 27 196617 gate;#P flonum 607 292 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P flonum 686 300 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 258 524 35 196617 del 25;#P newex 258 557 83 196617 t b 1 reset clear;#P newex 137 729 78 196617 print to-record;#P newex 51 727 75 196617 print to-buffer;#P newex 165 598 18 196617 t i;#P newex 281 636 27 196617 gate;#P newex 238 692 109 196617 buffer~ do-not-worry;#P user number~ 426 394 465 409 9 3 3 2 0. 0. 0 0. 250 0.;#P user number~ 430 552 469 567 9 3 3 2 0. 0. 0 0. 250 0.;#P user number~ 432 585 471 600 9 3 3 2 0. 0. 0 0. 250 0.;#P newex 805 489 61 196617 prepend set;#N comlet (bang) just made a recording;#P outlet 650 697 15 0;#P newex 650 644 30 196617 sel 0;#P newex 991 9 45 196617 loadbang;#P flonum 126 235 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 192 235 35 196617 % 12.;#N coll init_rag 1;#T flags 1 0;#T 1 0 Sa 0;#T 2 2 Re 0;#T 3 4 ga 0;#T 4 5 ma 0;#T 5 7 Pa 0;#T 6 9 dha 0;#T 7 11 ni 0;#P newobj 936 229 73 196617 coll init_rag 1;#P message 932 148 31 196617 dump;#P message 900 249 14 196617 0;#P newex 865 166 27 196617 t i i;#P newex 346 635 27 196617 gate;#N comlet (list) midipitch \, buffername \, length;#P outlet 510 679 15 0;#P newex 603 515 70 196617 prepend refer;#N coll init_rag 1;#T flags 1 0;#T 1 0 Sa 0;#T 2 2 Re 0;#T 3 4 ga 0;#T 4 5 ma 0;#T 5 7 Pa 0;#T 6 9 dha 0;#T 7 11 ni 0;#P newobj 480 619 73 196617 coll init_rag 1;#P newex 480 590 27 196617 int;#P newex 870 201 30 196617 sel 0;#P message 870 249 28 196617 none;#P toggle 865 144 15 0;#N coll init_steady-note-grabber 1;#T flags 1 0;#T 1 /pitch-tolerance 0.5;#T 2 /fade-in 111;#T 3 /fade-out 111;#T 4 /min-length 700;#T 5 /pitch-latency 1024;#T 6 /pitch-coll init_rag;#T 7 /auto-buffer-name 1;#P newobj 932 179 152 196617 coll init_steady-note-grabber 1;#N comlet OSC;#P inlet 396 49 15 0;#N comlet Input (signal);#P inlet 212 51 15 0;#N vpatcher 403 119 789 389;#P window setfont "Sans Serif" 9.;#P number 157 58 59 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 158 78 59 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#N comlet Start note (bang);#P inlet 90 29 15 0;#N comlet Which note (coll index);#P inlet 132 29 15 0;#N comlet Coll name;#P inlet 243 29 15 0;#P newex 243 124 70 196617 prepend refer;#N coll init_rag;#T flags 1 0;#T 1 0 Sa 0;#T 2 2 Re 0;#T 3 4 ga 0;#T 4 5 ma 0;#T 5 7 Pa 0;#T 6 9 dha 0;#T 7 11 ni 0;#P newobj 150 154 74 196617 coll;#P newex 90 76 27 196617 t b i;#P message 90 101 23 196617 sub;#P newex 90 124 95 196617 sprintf %s %i 3 %i;#P connect 7 0 2 0;#P connect 2 0 1 0;#P connect 1 0 0 0;#P connect 6 0 0 1;#P connect 0 0 3 0;#P connect 4 0 3 0;#P connect 6 0 9 0;#P connect 2 1 0 2;#P connect 5 0 4 0;#P pop;#P newobj 813 700 65 196617 p note-length;#P newex 258 487 29 196617 t b s;#P newex 491 331 27 196617 t b i;#P newex 466 417 27 196617 -;#P newex 444 441 32 196617 delay;#P newex 215 443 53 196617 unpack f s;#P newex 228 396 70 196617 prepend refer;#P newex 258 463 60 196617 prepend set;#P newex 374 722 110 196617 record~ do-not-worry;#P newex 192 347 79 196617 t b b i b i i;#N coll init_rag;#T flags 1 0;#T 1 0 Sa 0;#T 2 2 Re 0;#T 3 4 ga 0;#T 4 5 ma 0;#T 5 7 Pa 0;#T 6 9 dha 0;#T 7 11 ni 0;#P newobj 215 421 65 196617 coll;#P newex 192 321 140 196617 route startrecord stoprecord;#P newex 694 250 19 196617 t f;#P newex 638 227 19 196617 t f;#P newex 382 549 27 196617 *~;#P newex 444 482 29 196617 float;#P newex 414 482 29 196617 float;#N vpatcher 50 40 310 333;#N comlet Bang when fade-out complete;#P outlet 93 230 15 0;#P window setfont "Sans Serif" 9.;#P newex 123 63 27 196617 t f b;#P newex 93 207 28 196617 t b b;#P message 108 150 14 196617 1;#P message 92 150 14 196617 0;#P newex 93 182 27 196617 gate;#N comlet Signal;#P outlet 35 166 15 0;#P newex 123 89 55 196617 prepend 0.;#N comlet Fade out (# ms);#P inlet 123 43 15 0;#N comlet Fade in (# ms);#P inlet 35 39 15 0;#P newex 35 66 40 196617 t i b b;#P newex 35 89 61 196617 prepend 1.;#P message 52 109 23 196617 0.;#P newex 35 142 30 196617 line~;#P connect 4 0 3 0;#P connect 3 0 2 0;#P connect 2 0 0 0;#P connect 1 0 0 0;#P connect 6 0 0 0;#P connect 0 0 7 0;#P connect 3 1 1 0;#P fasten 11 1 9 0 116 229 149 229 149 133 97 133;#P connect 3 2 9 0;#P connect 10 0 8 0;#P connect 9 0 8 0;#P connect 8 0 11 0;#P connect 11 0 13 0;#P connect 12 1 10 0;#P connect 0 1 8 1;#P connect 5 0 12 0;#P connect 12 0 6 0;#P pop;#P newobj 413 506 40 196617 p fades;#P newex 396 77 743 196617 OSC-route /min-length /pitch-coll /pitch-tolerance /fade-in /fade-out /pitch /pitch-latency /record /init /buffer-name /auto-buffer-name;#N vpatcher 50 40 206 190;#P outlet 22 106 15 0;#P window setfont "Sans Serif" 9.;#P newex 89 49 27 196617 t b i;#P newex 55 49 27 196617 t b i;#P newex 22 82 101 196617 expr $i1 + $i2 + $i3;#P inlet 89 29 15 0;#P inlet 55 29 15 0;#P inlet 22 29 15 0;#P connect 0 0 3 0;#P connect 5 0 3 0;#P connect 4 0 3 0;#P connect 3 0 6 0;#P connect 1 0 4 0;#P connect 4 1 3 1;#P connect 2 0 5 0;#P connect 5 1 3 2;#P pop;#P newobj 378 249 55 196617 p trig-plus;#P newex 346 211 64 196617 sampstoms~;#N vpatcher 401 51 983 486;#P window setfont "Sans Serif" 9.;#P newex 263 340 99 196617 prepend startrecord;#P newex 263 319 27 196617 int;#P number 82 68 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P newex 41 68 40 196617 nothing;#P newex 453 297 40 196617 nothing;#P message 453 269 14 196617 1;#P newex 438 237 40 196617 t i b b;#P message 365 170 14 196617 1;#P newex 365 146 28 196617 t b b;#P newex 365 126 58 196617 select none;#P newex 413 215 35 196617 select;#P newex 287 185 40 196617 t i i i;#P newex 270 235 40 196617 t b b i;#P message 210 198 14 196617 3;#P newex 210 178 28 196617 t b b;#P message 307 319 55 196617 stoprecord;#P outlet 263 367 15 0;#P message 163 361 28 196617 time;#P newex 245 211 35 196617 select;#P message 175 178 14 196617 1;#P newex 175 149 28 196617 t b b;#P newex 175 128 81 196617 select none time;#P message 41 43 14 196617 1;#P newex 41 22 45 196617 loadbang;#P message 92 172 14 196617 2;#N comlet Min note length (ms);#P inlet 180 282 15 0;#P newex 163 310 27 196617 int;#P newex 92 150 40 196617 t b b i;#P message 41 149 14 196617 1;#P newex 41 126 61 196617 select none;#P newex 79 231 40 196617 nothing;#N vpatcher 50 40 194 198;#P window setfont "Sans Serif" 9.;#P message 65 65 27 196617 stop;#P newex 18 65 27 196617 t b i;#P newex 18 91 32 196617 delay;#N comlet Bangs when timer done;#P outlet 18 115 15 0;#N comlet reset;#P inlet 65 37 15 0;#N comlet #ms to wait;#P inlet 18 37 15 0;#P connect 0 0 4 0;#P connect 4 0 3 0;#P connect 5 0 3 0;#P connect 3 0 2 0;#P connect 4 1 3 1;#P connect 1 0 5 0;#P pop;#P newobj 163 340 41 196617 p timer;#P newex 41 99 364 196617 gate 3;#N comlet Pitch or nutting;#P inlet 111 35 15 0;#P comment 121 308 45 196617 Min note length;#P message 132 352 26 196617 500;#P comment 275 162 65 196617 Current note;#P connect 13 0 14 0;#P connect 14 0 33 0;#P fasten 6 0 33 0 84 259 5 259 5 64 46 64;#P fasten 32 0 33 0 458 323 526 323 526 64 46 64;#P connect 33 0 4 0;#P connect 4 0 7 0;#P connect 7 0 8 0;#P connect 8 0 6 0;#P connect 12 0 6 0;#P connect 17 0 6 0;#P connect 23 0 6 0;#P connect 33 0 34 0;#P connect 7 1 9 0;#P connect 9 0 12 0;#P connect 9 1 10 0;#P connect 24 0 10 0;#P connect 1 0 5 0;#P connect 10 0 5 0;#P connect 5 0 19 0;#P connect 4 1 15 0;#P connect 15 0 16 0;#P connect 16 0 17 0;#P connect 11 0 10 1;#P connect 16 1 5 1;#P connect 24 1 5 1;#P connect 15 1 22 0;#P connect 22 0 23 0;#P connect 15 2 18 0;#P connect 22 1 35 0;#P connect 35 0 36 0;#P connect 36 0 20 0;#P connect 21 0 20 0;#P connect 25 0 18 1;#P connect 18 1 24 0;#P connect 25 1 35 1;#P fasten 9 2 25 0 127 174 292 174;#P fasten 24 2 25 0 305 256 329 256 329 174 292 174;#P connect 28 1 21 0;#P connect 30 2 21 0;#P connect 4 2 27 0;#P connect 27 0 28 0;#P connect 28 0 29 0;#P fasten 19 0 4 1 168 412 537 412 537 86 400 86;#P connect 3 0 4 1;#P fasten 30 0 4 1 443 260 486 260 486 94 400 94;#P connect 27 1 26 0;#P fasten 25 2 26 1 322 207 443 207;#P connect 26 1 30 0;#P connect 30 1 31 0;#P connect 31 0 32 0;#P connect 29 0 32 0;#P pop;#P newobj 192 292 90 196617 p FSM;#P newex 192 270 84 196617 coll-close-match;#P newex 393 348 63 196617 tapout~ 100;#P newex 393 321 63 196617 tapin~ 1000;#P comment 663 363 110 196617 Latency: Fiddle window size + min note length + fade-in time;#P comment 268 203 73 196617 <- fiddle window size ->;#P comment 498 418 147 196617 Echoic memory includes min note length \, so compensate by delaying stop-record message.;#P comment 508 591 138 196617 index of pitch being recorded;#P connect 54 0 56 0;#P connect 44 0 45 0;#P connect 39 0 57 0;#P connect 40 0 55 0;#P connect 10 5 44 0;#P connect 44 0 6 0;#P connect 33 0 7 0;#P connect 6 0 7 0;#P connect 7 0 17 0;#P connect 17 0 19 0;#P connect 22 0 18 0;#P connect 19 2 18 0;#P connect 18 0 23 0;#P connect 10 1 22 0;#P connect 10 1 6 1;#P connect 49 0 53 0;#P connect 54 0 53 0;#P connect 23 1 21 0;#P connect 21 0 27 0;#P connect 27 0 59 0;#P connect 59 0 58 0;#P connect 10 2 6 2;#P connect 10 0 7 1;#P connect 55 0 54 0;#P connect 58 3 54 1;#P fasten 10 10 62 0 898 466;#P connect 10 6 8 0;#P connect 55 0 39 0;#P connect 27 1 62 1;#P connect 74 2 39 1;#P fasten 62 0 39 1 368 592;#P connect 58 1 39 1;#P connect 58 2 39 1;#P connect 14 0 20 0;#P connect 75 0 20 0;#P connect 10 3 9 0;#P connect 5 0 14 0;#P connect 11 1 74 0;#P connect 29 0 4 0;#P connect 9 0 5 0;#P connect 4 0 5 0;#P fasten 31 0 10 0 937 218 1047 218 1047 72;#P connect 30 0 10 0;#P connect 64 1 10 0;#P connect 49 0 75 0;#P connect 39 0 75 0;#P connect 41 0 75 0;#P connect 11 0 14 1;#P connect 8 1 9 1;#P connect 12 0 11 0;#P connect 58 0 12 0;#P connect 10 0 9 2;#P connect 5 0 52 0;#P connect 11 0 51 0;#P connect 14 0 50 0;#P connect 15 0 12 1;#P connect 13 0 11 1;#P connect 17 1 24 0;#P connect 24 0 13 0;#P connect 16 0 13 1;#P connect 26 0 25 0;#P connect 10 0 25 0;#P connect 25 0 24 1;#P connect 74 0 35 0;#P connect 35 0 36 0;#P connect 37 0 36 0;#P connect 26 1 25 1;#P connect 10 4 26 0;#P connect 36 0 63 0;#P connect 19 5 35 1;#P connect 63 0 38 0;#P fasten 10 9 63 1 761 534;#P fasten 10 10 63 2 898 466;#P connect 10 1 37 0;#P connect 15 0 61 0;#P connect 10 3 15 0;#P connect 39 0 47 0;#P connect 47 0 48 0;#P connect 16 0 60 0;#P connect 10 4 16 0;#P connect 74 1 69 0;#P connect 20 0 69 0;#P connect 69 0 70 0;#P connect 66 0 64 0;#P connect 67 6 70 1;#P connect 10 9 49 0;#P connect 49 0 68 0;#P connect 68 1 67 0;#P connect 68 0 67 0;#P fasten 70 0 28 0 810 691;#P connect 19 4 28 1;#P connect 10 7 32 0;#P connect 32 0 40 0;#P connect 10 1 28 2;#P connect 40 1 34 0;#P connect 34 0 33 0;#P connect 34 0 41 0;#P connect 70 0 71 0;#P connect 10 8 42 0;#P connect 66 1 42 0;#P connect 42 0 31 0;#P connect 69 0 72 0;#P connect 46 0 65 0;#P connect 65 0 66 0;#P connect 67 6 73 0;#P pop;